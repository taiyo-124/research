## 研究メモ

- テーマ: スマート工場における5Gネットワーク利用効率化。3GPP TS 22.104 V17.9.0で求められるURLLC要件（エンドツーエンド遅延・高信頼性）を満たす形での検証が目標。
- 3GPP TR 22.804 V16.1.0に整理された工場ユースケース（ロボットセル、自動化ラインなど）を念頭に置き、シナリオ設定が実環境と乖離していないかを常に確認する方針。
- 実データをそのまま取得するのは難しいため、MathWorks公式ドキュメント（SimEvents “Model Production Lines Using SimEvents”, 5G Toolbox “Wireless Network Simulations”, R2023b）で公開されている手順・パラメータを一次ソースとして採用し、SimEventsと5G Toolboxを連携させて工場全体をシミュレートする。
- モデルを組む際は、生産ライン構成、端末台数、トラフィック発生パターン、遅延・信頼性要求などの前提を明示し、3GPP仕様と照らして妥当性を確認する。
- 今後の進め方: SimEvents公式事例ベースで迅速にシミュレーションを構築しつつ、各パラメータが3GPPや公開ユースケースと整合するかを逐次チェックすることで、現場との乖離を最小化する。

### URLLC実装に必要なパラメータ整理
- エンドツーエンド遅延/制御周期: ロボットセル制御では1 ms程度のサイクルタイムと遅延上限が定義されており、これをシミュレータのイベントタイムステップに反映させる。(3GPP TS 22.104 V17.9.0 Table 5.4.3-1)
- 信頼性/許容パケット喪失: 99.9999%（10⁻⁶）クラスの成功率が求められ、リトライ回数や冗長化方式をこの目標で設計する必要がある。(3GPP TS 22.104 V17.9.0 Table 5.4.3-1)
- ペイロードサイズ: 32バイト程度の制御ペイロードが想定されているため、MAC/PHYレイヤで必要なPRB数の算定につながる。(3GPP TS 22.104 V17.9.0 Table 5.4.3-1)
- 端末/リンク数: 1セル内のロボット腕や周辺センサーなど複数デバイスを同時制御するケースが記載されているので、シナリオごとの接続数・同時通信数を設定する。(3GPP TS 22.104 V17.9.0 §6.3)
- トラフィック方向・更新頻度: 双方向のコマンド/フィードバックが周期的にやりとりされる前提のため、上下り比率やトリガイベントを定義する。(3GPP TS 22.104 V17.9.0 §6.2.1)
- HARQ/再送制限: 再送による遅延増大を避けるために許容HARQ回数や時間制約が示されており、PHY層再送制御をその制限内に収める。(3GPP TS 22.104 V17.9.0 §6.2.2)
- 時刻同期精度: 制御協調のために1 µs級の同期が推奨されるので、ネットワークタイミングモデルにクロック精度と配布遅延を組み込む。(3GPP TS 22.104 V17.9.0 §6.4)
- サービスエリア/モビリティ: 工場内での移動速度（歩行～搬送ロボ）とセル境界条件が規定されているため、ハンドオーバやリンクマージン設計への入力とする。(3GPP TS 22.104 V17.9.0 Table 5.4.3-1, §6.3)

### 監視カメラ（eMBB）向けパラメータ整理
- 映像品質・フレームレート: 工場内AR/ビジョン支援では60 Hz以上・HD(1280×720)またはFull HD(1920×1080)での双方向映像伝送が求められるため、固定監視でも同等のフレーム生成を標準とする。(3GPP TR 22.804 V16.1.0 §5.3.10.3, Factories of the Future 10.1)
- 上りスループット: モバイルロボット搭載カメラは1台あたり10 Mbit/s超の映像を送出し、最大100台を同時収容する要件があるので、基地局側は少なくとも1 Gbit/s級の映像トラフィックを処理できる設計にする。(3GPP TR 22.804 V16.1.0 §5.3.7.6, Factories of the Future 7.2)
- 遅延・ジッタ: 映像遠隔操作ではサイクルタイム10～100 ms、ジッタ50%以下が要求されるため、監視カメラのエンドツーエンド遅延も50 ms以下・ジッタ1 ms級に収まるよう遅延バジェットを設定する。(3GPP TR 22.804 V16.1.0 §5.3.7.6, Factories of the Future 7.1)
- 信頼性: ロボット制御リンクでは通信サービス可用性>99.9999%が、AR映像ではフレーム成功率99.9%以上が求められるため、映像スライスでも同一水準のフェイルオーバと再送戦略を実装する。(3GPP TR 22.804 V16.1.0 §5.3.7.6 & §5.3.10.6, Factories of the Future 7.1/10.3)
- カメラ台数/密度: Factory use caseでは100台規模のロボット/カメラを同一セルで扱い、さらに高帯域ストリーム(最大100 Mbit/s/UE)への対応が求められるため、端末密度と同時スループットの前提を明文化する。(3GPP TR 22.804 V16.1.0 §5.3.7.6, Factories of the Future 7.1; §5.3.8.6, Factories of the Future 8.2)
- モビリティ: カメラがAGVや点検ロボに搭載されるケースでは、「ハンドオーバでサービス劣化を起こさない」ことが要求されているため、URLLCと同等のモビリティ管理を計画する。(3GPP TR 22.804 V16.1.0 §5.3.7.5/7.3)
- 帯域幅/チャネル配置: 高帯域ストリームを多数収容するFactory要件（Factories of the Future 8.2）に対応するため、FR1で100 MHz級、FR2で400 MHz級のeMBB帯域を確保しPRB/MIMO設定を検証する。(3GPP TR 22.804 V16.1.0 §5.3.8.6; 3GPP TS 22.261 V18.2.0 §6.1.4)

### mMTCセンサー群向けパラメータ整理
- 端末密度: mMTCでは1 km²あたり10⁶台（TS 22.261）に加え、工場床面積0.05～1台/m²の配置パターン（TR 22.804 Table 5.3.8.1-1）が提示されているため、セルサイズとアクセスポリシーを両基準で設計する。
- ペイロード/レポート周期: 温度182 Hz・加速度2 kHz・音響192 kHzといったサンプリングと6 kbit/s～数Mbit/sの生成データ量が整理されているので、その分布をSimEventsで用いてトラフィック生成ロジックを組む。(3GPP TR 22.804 V16.1.0 Table 5.3.8.1-2)
- 遅延要求: 通常監視は50 ms～1 sで十分、緊急停止系のみ専用ネットワークで低遅延（TS 22.261では100 ms～10 s許容）とされるため、アプリ種別ごとに遅延バケットを分ける。(3GPP TR 22.804 V16.1.0 §5.3.8.1; 3GPP TS 22.261 V18.2.0 Table 6.1.2-1)
- 信頼性: 多数センサーの集合評価で>99%成功率を確保する前提があるので、HARQ回数よりもRACH競合制御やバックオフ設定に重点を置く。(3GPP TS 22.261 V18.2.0 §6.1.2; 3GPP TR 22.804 V16.1.0 §5.3.8.1)
- エネルギー/バッテリ寿命: 10年寿命を維持するため、送信周期とスリープ比率の設計が求められており、一次情報のデューティサイクル値をモデルへ反映させる。(3GPP TS 22.261 V18.2.0 Table 6.1.2-1)
- 上りトリガ混在: §5.3.8.3のフローでは定常送信後に異常検知でバースト送信する手順が示されているので、突発RACH負荷を再現するイベントを投入する。(3GPP TR 22.804 V16.1.0 §5.3.8.3)
- 位置/カバレッジ要求: 深い屋内遮蔽でも164 dB級MCLが必要とされるため、リピータやセル設計の境界条件として取り込む。(3GPP TS 22.261 V18.2.0 §6.1.2)
